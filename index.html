<!DOCTYPE html>
<html lang="ru">
<head>
Â  <meta charset="utf-8" />
Â  <title>VR 360 Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¢ÑƒÑ€</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â Â 
Â  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
Â  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>

Â  <style>
Â  Â  /* ---------------------- Ğ¡Ğ¢Ğ˜Ğ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ---------------------- */

Â  Â  html, body {
Â  Â  Â  margin: 0;
Â  Â  Â  height: 100%;
Â  Â  Â  background: #f5f0e6;
Â  Â  Â  font-family: "Georgia", serif;
Â  Â  Â  color: #2b241a;
Â  Â  Â  overflow: hidden;
Â  Â  }

Â  Â  .screen {
Â  Â  Â  position: absolute;
Â  Â  Â  inset: 0;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  flex-direction: column;
Â  Â  Â  background: #f5f0e6;
Â  Â  }

Â  Â  .card {
Â  Â  Â  background: rgba(245, 237, 220, 0.95);
Â  Â  Â  border: 2px solid #a88f61;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  padding: 24px 32px;
Â  Â  Â  text-align: center;
Â  Â  Â  box-shadow: 0 0 20px rgba(50, 30, 10, 0.4);
Â  Â  Â  max-width: 90%;
Â  Â  Â  max-width: 700px;Â 
Â  Â  Â  padding: 15px;Â 
Â  Â  }

Â  Â  .btn {
Â  Â  Â  display: inline-block;
Â  Â  Â  background: linear-gradient(to bottom, #c1a675, #a88f61);
Â  Â  Â  color: #2b241a;
Â  Â  Â  border: 1px solid #7b6643;
Â  Â  Â  padding: 6px 12px;Â 
Â  Â  Â  border-radius: 8px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin: 4px;
Â  Â  Â  transition: 0.3s;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  box-shadow: 0 2px 3px rgba(0,0,0,0.2);
Â  Â  Â  white-space: nowrap;
Â  Â  }

Â  Â  .btn:hover {
Â  Â  Â  background: linear-gradient(to bottom, #d4bc8a, #b5996b);
Â  Â  Â  transform: translateY(-2px);
Â  Â  }
Â  Â Â 
Â  Â  /* Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ ÑĞ»Ğ°Ğ¹Ğ´ĞµÑ€Ğ° */
Â  Â  .slider-container {
Â  Â  Â  position: relative;
Â  Â  Â  width: 90%;
Â  Â  Â  max-width: 800px;
Â  Â  Â  height: 60vh;
Â  Â  Â  overflow: hidden;
Â  Â  Â  border: 3px solid #a88f61;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  box-shadow: 0 0 20px rgba(50, 30, 10, 0.4);
Â  Â  }

Â  Â  .slider-container img {
Â  Â  Â  position: absolute;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  object-fit: cover;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  }

Â  Â  .slider-container .after-image {
Â  Â  Â  clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%);
Â  Â  Â  transition: clip-path 0.1s;
Â  Â  }

Â  Â  .slider-handle {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0;
Â  Â  Â  left: 50%;
Â  Â  Â  width: 4px;
Â  Â  Â  height: 100%;
Â  Â  Â  background: #a88f61;
Â  Â  Â  cursor: ew-resize;
Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.3);
Â  Â  }

Â  Â  .photo-caption {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  color: #2b241a;
Â  Â  }
Â  Â Â 
Â  Â  /* Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ PANORAMA */
Â  Â Â 
Â  Â  #panoramaViewer {
Â  Â  Â  width: 90vw;Â 
Â  Â  Â  max-width: 700px;
Â  Â  Â  height: 60vh;
Â  Â  Â  border: 3px solid #a88f61;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  box-shadow: 0 0 20px rgba(50, 30, 10, 0.4);
Â  Â  Â  margin-top: 10px;
Â  Â  Â  margin-bottom: 10px;
Â  Â  }

Â  Â  .panorama-controls {
Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .panorama-controls .btn {
Â  Â  Â  Â  min-width: 35px;
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  padding: 8px 10px;
Â  Â  }

Â  </style>

</head>

<body>
Â  <div id="langScreen" class="screen">
Â  Â  <div class="card">
Â  Â  Â  <h2>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº / Select language / Tilni tanlang</h2>
Â  Â  Â  <button class="btn" onclick="showGreeting('ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
Â  Â  Â  <button class="btn" onclick="showGreeting('en')">English</button>
Â  Â  Â  <button class="btn" onclick="showGreeting('uz')">Oâ€˜zbekcha</button>
Â  Â  </div>
Â  </div>

Â  <div id="greetingScreen" class="screen" style="display:none;">
Â  Â  <div class="card">
Â  Â  Â  <h3 id="greetingText"></h3>
Â  Â  Â  <div>
Â  Â  Â  Â  <button class="btn" id="shortBtn"></button>
Â  Â  Â  Â  <button class="btn" id="fullBtn"></button>
Â  Â  Â  </div>
Â  Â  Â  <button class="btn" id="photoBtn"></button>
Â  Â  Â  <button class="btn" id="photoPanoramaBtn"></button>
Â  Â  Â Â 
Â  Â  Â  <button class="btn" id="backFromGreetingBtn"></button>
Â  Â  </div>
Â  </div>

Â  <div id="instructionScreen" class="screen" style="display:none;">
Â  Â  <div class="card">
Â  Â  Â  <h2 id="instructionTitle"></h2>
Â  Â  Â  <h3 id="instructionText"></h3>
Â  Â  Â  <button class="btn" id="startBtn" style="margin-top:20px;"></button>
Â  Â  Â  <button class="btn" id="backFromInstructionBtn"></button>
Â  Â  </div>
Â  </div>

Â  <div id="photoScreen" class="screen" style="display:none;">
Â  Â  <div class="slider-container" id="sliderContainer">
Â  Â  Â  <img src="svayp1.jpg" alt="Ğ Ğ°Ğ·Ñ€ÑƒÑˆĞµĞ½Ğ½Ñ‹Ğ¹ ĞĞº Ğ¡Ğ°Ñ€Ğ°Ğ¹" class="before-image">
Â  Â  Â  <img src="svayp2.jpg" alt="Ğ ĞµĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞĞº Ğ¡Ğ°Ñ€Ğ°Ğ¹" class="after-image" id="afterImage">
Â  Â  Â  <div class="slider-handle" id="sliderHandle"></div>
Â  Â  </div>
Â  Â  <div class="photo-caption" id="photoCaption"></div>
Â  Â  <button class="btn" style="margin-top:20px;" id="backFromPhotoBtn"></button>
Â  </div>
Â Â 
Â  <div id="panoramaScreen" class="screen" style="display:none;">
Â  Â  <div class="card" style="max-width: 95%;">
Â  Â  Â  <h2 id="panoramaTitle"></h2>
Â  Â  Â Â 
Â  Â  Â  <div id="panoramaViewer"></div>

Â  Â  Â  <div class="panorama-controls" id="panoramaControls">
Â  Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <button class="btn" style="margin-top:15px;" id="backFromPanoramaBtn"></button>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  let currentLang = 'ru';
Â  Â  let videoUrl = '';
Â  Â  let currentScreen = 'langScreen';
Â  Â  let panoramaViewer = null; // ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ° Pannellum

    // ğŸ’¡ ĞŸÑƒÑ‚ÑŒ Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½, Ñ‚Ğ°Ğº ĞºĞ°Ğº Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ»ĞµĞ¶Ğ°Ñ‚ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ index.html
    
Â  Â  // Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²Ğ°ÑˆĞ¸Ñ… 6 Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ½Ñ‹Ñ… Ñ„Ğ¾Ñ‚Ğ¾. ĞŸÑƒÑ‚ÑŒ - Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¸Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°.
Â  Â  const panoramas = [
Â  Â  Â  Â  { id: 'p1', filename: 'panoramiks1.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 1: Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´' },
Â  Â  Â  Â  { id: 'p2', filename: 'panoramiks2.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 2: Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ´Ğ²Ğ¾Ñ€' },
Â  Â  Â  Â  { id: 'p3', filename: 'panoramiks3.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 3: Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ñ…Ğ¾Ğ´' },
Â  Â  Â  Â  { id: 'p4', filename: 'panoramiks4.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 4: Ğ’Ğ¸Ğ´ Ñ Ğ±Ğ°ÑˆĞ½Ğ¸' },
Â  Â  Â  Â  { id: 'p5', filename: 'panoramiks5.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 5: Ğ Ñ‹Ğ½Ğ¾Ğº' },
Â  Â  Â  Â  { id: 'p6', filename: 'panoramiks6.jpg', title_ru: 'ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 6: Ğ’Ğ¾Ñ€Ğ¾Ñ‚Ğ° Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°' },
Â  Â  ];
Â  Â Â 
Â  Â  // ---------------------- Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ ĞĞĞ’Ğ˜Ğ“ĞĞ¦Ğ˜Ğ˜ ----------------------

Â  Â  function showScreen(id) {
Â  Â  Â  // ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° VR-Ğ¿Ğ»ĞµĞµÑ€Ğ° Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğµ ÑĞ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ñ‹
Â  Â  Â  if (currentScreen === 'panoramaScreen' && panoramaViewer) {
Â  Â  Â  Â  Â  panoramaViewer.destroy();
Â  Â  Â  Â  Â  panoramaViewer = null;
Â  Â  Â  }

Â  Â  Â  document.getElementById(currentScreen).style.display = "none";
Â  Â  Â  document.getElementById(id).style.display = "flex";
Â  Â  Â  currentScreen = id;
Â  Â  }

Â  Â  function goBack(target) {
Â  Â  Â  showScreen(target);
Â  Â  }

Â  Â  function showGreeting(lang) {
Â  Â  Â  currentLang = lang;
Â  Â  Â  showScreen("greetingScreen");

Â  Â  Â  let greet, shortText, fullText, photoText, photoPanoramaText, backText, photoCaption;

Â  Â  Â  switch (lang) {
Â  Â  Â  Â  case "ru":
Â  Â  Â  Â  Â  greet = "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ°:";
Â  Â  Â  Â  Â  shortText = "ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ";
Â  Â  Â  Â  Â  fullText = "ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ";
Â  Â  Â  Â  Â  photoText = "Ğ¤Ğ¾Ñ‚Ğ¾ Ñ€ĞµĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸";
Â  Â  Â  Â  Â  photoPanoramaText = "Ğ¤Ğ¾Ñ‚Ğ¾Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ° 360Â°";
Â  Â  Â  Â  Â  backText = "ĞĞ°Ğ·Ğ°Ğ´";
Â  Â  Â  Â  Â  photoCaption = "ĞŸĞ¾Ñ‚ÑĞ½Ğ¸Ñ‚Ğµ Ğ»Ğ¸Ğ½Ğ¸Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ: Ğ Ğ°Ğ·Ñ€ÑƒÑˆĞµĞ½Ğ½Ñ‹Ğ¹ / Ğ ĞµĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞĞº-Ğ¡Ğ°Ñ€Ğ°Ğ¹";
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  case "en":
Â  Â  Â  Â  Â  greet = "Choose a version to view:";
Â  Â  Â  Â  Â  shortText = "Short version";
Â  Â  Â  Â  Â  fullText = "Full version";
Â  Â  Â  Â  Â  photoText = "Reconstruction photo";
Â  Â  Â  Â  Â  photoPanoramaText = "360Â° Photo Panorama";
Â  Â  Â  Â  Â  backText = "Back";
Â  Â  Â  Â  Â  photoCaption = "Drag the line to compare: Ruined / Reconstructed Ak-Saray";
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  case "uz":
Â  Â  Â  Â  Â  greet = "Koâ€˜rish turini tanlang:";
Â  Â  Â  Â  Â  shortText = "Qisqa versiya";
Â  Â  Â  Â  Â  fullText = "Toâ€˜liq versiya";
Â  Â  Â  Â  Â  photoText = "Qayta tiklangan surat";
Â  Â  Â  Â  Â  photoPanoramaText = "360Â° Fotopanorama";
Â  Â  Â  Â  Â  backText = "Ortga";
Â  Â  Â  Â  Â  photoCaption = "Chiziqni harakatlantirib solishtiring: vayron / tiklangan Ak-Saroy";
Â  Â  Â  Â  Â  break;
Â  Â  Â  }

Â  Â  Â  document.getElementById("greetingText").innerText = greet;
Â  Â  Â  document.getElementById("shortBtn").innerText = shortText;
Â  Â  Â  document.getElementById("fullBtn").innerText = fullText;
Â  Â  Â  document.getElementById("photoBtn").innerText = photoText;
Â  Â  Â  document.getElementById("photoPanoramaBtn").innerText = photoPanoramaText;
Â  Â  Â  document.getElementById("backFromGreetingBtn").innerText = backText;
Â  Â  Â  document.getElementById("backFromInstructionBtn").innerText = backText;
Â  Â  Â  document.getElementById("backFromPhotoBtn").innerText = backText;
Â  Â  Â  document.getElementById("backFromPanoramaBtn").innerText = backText;
Â  Â  Â  document.getElementById("photoCaption").innerText = photoCaption;

Â  Â  Â  document.getElementById("shortBtn").onclick = () => showInstruction("https://www.youtube.com/watch?v=6WX-oVWf5YY");
Â  Â  Â  document.getElementById("fullBtn").onclick = () => showInstruction("https://www.youtube.com/watch?v=T3ypZKNN7_4");
Â  Â  Â  document.getElementById("photoBtn").onclick = showPhotoScreen;
Â  Â  Â  // ĞŸĞµÑ€ĞµĞ´Ğ°ĞµĞ¼ Ğ¸Ğ¼Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ»Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
Â  Â  Â  document.getElementById("photoPanoramaBtn").onclick = () => showPanoramaScreen(panoramas[0].filename); 
Â  Â  Â  document.getElementById("backFromGreetingBtn").onclick = () => goBack('langScreen');
Â  Â  }

Â  Â  function showInstruction(url) {
Â  Â  Â  videoUrl = url;
Â  Â  Â  showScreen("instructionScreen");
Â  Â  Â Â 
Â  Â  Â  let title, text, startText;
Â  Â  Â  
Â  Â  Â  switch (currentLang) {
Â  Â  Â  Â  case "ru":
Â  Â  Â  Â  Â  title = "Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚ÑƒÑ€ Ğ¿Ğ¾ Ğ´Ñ€ĞµĞ²Ğ½ĞµĞ¼Ñƒ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ñƒ";
Â  Â  Â  Â  Â  text = "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¼Ñ‹ÑˆÑŒ Ğ¸Ğ»Ğ¸ Ğ³Ğ¸Ñ€Ğ¾ÑĞºĞ¾Ğ¿, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ·Ğ¾Ñ€. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Â«ĞĞ°Ñ‡Ğ°Ñ‚ÑŒÂ», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´ĞµĞ¾.";
Â  Â  Â  Â  Â  startText = "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ";
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  case "en":
Â  Â  Â  Â  Â  title = "Virtual tour of the ancient city";
Â  Â  Â  Â  Â  text = "Instruction: use your mouse or gyroscope to move the view. Click 'Start' to open the video.";
Â  Â  Â  Â  Â  startText = "Start";
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  case "uz":
Â  Â  Â  Â  Â  title = "Qadimiy shahar boâ€˜ylab virtual sayohat";
Â  Â  Â  Â  Â  text = "Koâ€˜rsatma: manzarani aylantirish uchun sichqoncha yoki giroskopdan foydalaning. 'Boshlash' tugmasini bosing.";
Â  Â  Â  Â  Â  startText = "Boshlash";
Â  Â  Â  Â  Â  break;
Â  Â  Â  }

Â  Â  Â  document.getElementById("instructionTitle").innerText = title;
Â  Â  Â  document.getElementById("instructionText").innerText = text;
Â  Â  Â  document.getElementById("startBtn").innerText = startText;

Â  Â  Â  document.getElementById("startBtn").onclick = () => window.open(videoUrl, "_blank");
Â  Â  Â  document.getElementById("backFromInstructionBtn").onclick = () => goBack('greetingScreen');
Â  Â  }

Â  Â  function showPhotoScreen() {
Â  Â  Â  showScreen("photoScreen");
Â  Â  Â  initSlider();
Â  Â  Â  document.getElementById("backFromPhotoBtn").onclick = () => goBack('greetingScreen');
Â  Â  }

Â  Â  function initSlider() {
Â  Â  Â  const container = document.getElementById('sliderContainer');
Â  Â  Â  const afterImage = document.getElementById('afterImage');
Â  Â  Â  const handle = document.getElementById('sliderHandle');
Â  Â  Â  let isDragging = false;

Â  Â  Â  function setPosition(x) {
Â  Â  Â  Â  const rect = container.getBoundingClientRect();
Â  Â  Â  Â  let pos = Math.max(0, Math.min(x - rect.left, rect.width));
Â  Â  Â  Â  const percent = (pos / rect.width) * 100;
Â  Â  Â  Â  afterImage.style.clipPath = `polygon(0 0, ${percent}% 0, ${percent}% 100%, 0 100%)`;
Â  Â  Â  Â  handle.style.left = `${percent}%`;
Â  Â  Â  }

Â  Â  Â  handle.addEventListener('mousedown', () => isDragging = true);
Â  Â  Â  window.addEventListener('mouseup', () => isDragging = false);
Â  Â  Â  window.addEventListener('mousemove', (e) => { if(isDragging) setPosition(e.clientX); });

Â  Â  Â  handle.addEventListener('touchstart', () => isDragging = true);
Â  Â  Â  window.addEventListener('touchend', () => isDragging = false);
Â  Â  Â  window.addEventListener('touchmove', (e) => { if(isDragging) setPosition(e.touches[0].clientX); });

Â  Â  Â  setPosition(container.getBoundingClientRect().width / 2);
Â  Â  }
Â  Â Â 
Â  Â  // ---------------------- Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ PANORAMA ----------------------

Â  Â  function showPanoramaScreen(initialPanorama) {
Â  Â  Â  showScreen("panoramaScreen");
Â  Â  Â Â 
Â  Â  Â  const titleEl = document.getElementById('panoramaTitle');
Â  Â  Â  if (currentLang === 'ru') {
Â  Â  Â  Â  Â  titleEl.innerText = "360Â° Ğ¤Ğ¾Ñ‚Ğ¾Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ°";
Â  Â  Â  } else if (currentLang === 'en') {
Â  Â  Â  Â  Â  titleEl.innerText = "360Â° Photo Panorama";
Â  Â  Â  } else {
Â  Â  Â  Â  Â  titleEl.innerText = "360Â° Fotopanorama";
Â  Â  Â  }

Â  Â  Â  // 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼
Â  Â  Â  createPanoramaButtons();

Â  Â  Â  // 2. Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Pannellum
Â  Â  Â  initializePanoramaViewer(initialPanorama);
Â  Â  Â Â 
Â  Â  Â  document.getElementById("backFromPanoramaBtn").onclick = () => goBack('greetingScreen');
Â  Â  }

Â  Â  function createPanoramaButtons() {
Â  Â  Â  Â  const controls = document.getElementById('panoramaControls');
Â  Â  Â  Â  controls.innerHTML = ''; 

Â  Â  Â  Â  panoramas.forEach((pano, index) => {
Â  Â  Â  Â  Â  Â  const button = document.createElement('button');
Â  Â  Â  Â  Â  Â  button.className = 'btn panorama-select-btn';
Â  Â  Â  Â  Â  Â  button.innerText = index + 1; 
Â  Â  Â  Â  Â  Â  button.setAttribute('data-filename', pano.filename);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (currentLang === 'ru' && pano.title_ru) {
Â  Â  Â  Â  Â  Â  Â  Â  Â button.title = pano.title_ru;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  button.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  // âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Pannellum Ğ¼ĞµÑ‚Ğ¾Ğ´ load()
Â  Â  Â  Â  Â  Â  Â  Â  loadNewPanorama(pano.filename);
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.panorama-select-btn').forEach(b => b.classList.remove('active'));
Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('active');
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  controls.appendChild(button);
Â  Â  Â  Â  });

Â  Â  Â  Â  // Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ´Ğ»Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ñ‹
Â  Â  Â  Â  if (controls.firstChild) {
Â  Â  Â  Â  Â  Â  controls.firstChild.classList.add('active');
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function initializePanoramaViewer(filename) {
Â  Â  Â  Â  if (panoramaViewer) {
Â  Â  Â  Â  Â  Â  panoramaViewer.destroy();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Pannellum
Â  Â  Â  Â  panoramaViewer = pannellum.viewer('panoramaViewer', {
Â  Â  Â  Â  Â  Â  "type": "equirectangular",
Â  Â  Â  Â  Â  Â  "panorama": filename, // ĞŸÑƒÑ‚ÑŒ Ğº Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼Ñƒ Ñ„Ğ°Ğ¹Ğ»Ñƒ
Â  Â  Â  Â  Â  Â  "autoLoad": true,
Â  Â  Â  Â  Â  Â  "autoRotate": -2, 
Â  Â  Â  Â  Â  Â  "showZoomCtrl": true,
Â  Â  Â  Â  Â  Â  "compass": true,
Â  Â  Â  Â  Â  Â  "hfov": 100
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function loadNewPanorama(filename) {
Â  Â  Â  Â  if (panoramaViewer) {
Â  Â  Â  Â  Â  Â  // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ñ‹
Â  Â  Â  Â  Â  Â  panoramaViewer.load({
Â  Â  Â  Â  Â  Â  Â  Â  "type": "equirectangular",
Â  Â  Â  Â  Â  Â  Â  Â  "panorama": filename,
Â  Â  Â  Â  Â  Â  Â  Â  "autoLoad": true
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>
